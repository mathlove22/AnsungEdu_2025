<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>안성시교육청 공동교육과정</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel (JSX를 브라우저에서 변환) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        body { font-family: 'Pretendard', sans-serif; }
        
        /* 스크롤바 커스텀 */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        @keyframes fade-in {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
          animation: fade-in 0.4s ease-out forwards;
        }
        @keyframes fade-in-up {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up {
          animation: fade-in-up 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- 아이콘 컴포넌트 정의 (Lucide React 대체) ---
        const Icon = ({ path, size = 24, className = "" }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} 
                height={size} 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {path}
            </svg>
        );

        const BookOpen = (props) => <Icon {...props} path={<><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></>} />;
        const Monitor = (props) => <Icon {...props} path={<><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></>} />;
        const Cpu = (props) => <Icon {...props} path={<><rect x="4" y="4" width="16" height="16" rx="2" ry="2"/><rect x="9" y="9" width="6" height="6"/><line x1="9" y1="1" x2="9" y2="4"/><line x1="15" y1="1" x2="15" y2="4"/><line x1="9" y1="20" x2="9" y2="23"/><line x1="15" y1="20" x2="15" y2="23"/><line x1="20" y1="9" x2="23" y2="9"/><line x1="20" y1="14" x2="23" y2="14"/><line x1="1" y1="9" x2="4" y2="9"/><line x1="1" y1="14" x2="4" y2="14"/></>} />;
        const Menu = (props) => <Icon {...props} path={<><line x1="4" y1="12" x2="20" y2="12"/><line x1="4" y1="6" x2="20" y2="6"/><line x1="4" y1="18" x2="20" y2="18"/></>} />;
        const X = (props) => <Icon {...props} path={<><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></>} />;
        const ChevronRight = (props) => <Icon {...props} path={<polyline points="9 18 15 12 9 6"/>} />;
        const GraduationCap = (props) => <Icon {...props} path={<><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></>} />;
        const ClipboardList = (props) => <Icon {...props} path={<><rect x="8" y="2" width="8" height="4" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></>} />;
        const Target = (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></>} />;
        const Lightbulb = (props) => <Icon {...props} path={<><line x1="12" y1="17" x2="12" y2="21"/><path d="M9 17h6"/><path d="M19 11c0 3.31-2.69 6-6 6s-6-2.69-6-6c0-2.42 1.37-4.56 3.4-5.59L12 3l1.6 2.41C17.63 6.44 19 8.58 19 11z"/></>} />;
        const User = (props) => <Icon {...props} path={<><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></>} />;
        const FlaskConical = (props) => <Icon {...props} path={<><path d="M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2"/><line x1="8.5" y1="2" x2="15.5" y2="2"/><path d="M8.5 12h7"/></>} />;
        const Clapperboard = (props) => <Icon {...props} path={<><rect x="4" y="2" width="16" height="20" rx="2" ry="2" transform="rotate(180 12 12)"/><line x1="4" y1="8" x2="20" y2="8"/><line x1="8" y1="2" x2="8" y2="8"/><line x1="16" y1="2" x2="16" y2="8"/></>} />;
        const HeartPulse = (props) => <Icon {...props} path={<><path d="M19 14c1.49-1.28 3.6-2.34 4.58-3.26a6 6 0 0 0-7.85-8.77l-1.87 1.76-1.57-1.45a6 6 0 0 0-8.23 8.78c1.33 1.25 4.54 3.73 7.8 7.35z"/><path d="M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27"/></>} />;
        const Globe2 = (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></>} />;
        const Languages = (props) => <Icon {...props} path={<><path d="m5 8 6 6"/><path d="m4 14 6-6 2-3"/><path d="M2 5h12"/><path d="M7 2h1"/><path d="m22 22-5-10-5 10"/><path d="M14 18h6"/></>} />;
        const Scale = (props) => <Icon {...props} path={<><path d="m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1z"/><path d="m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1z"/><path d="M7 21h10"/><path d="M12 3v18"/><path d="M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2"/></>} />;
        const MessageCircle = (props) => <Icon {...props} path={<path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/>} />;
        const Send = (props) => <Icon {...props} path={<><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></>} />;
        const Sparkles = (props) => <Icon {...props} path={<><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3z"/></>} />;
        const Loader2 = (props) => <Icon {...props} className={props.className || "animate-spin"} path={<><path d="M21 12a9 9 0 1 1-6.219-8.56"/></>} />;
        const Bot = (props) => <Icon {...props} path={<><rect x="3" y="11" width="18" height="10" rx="2"/><circle cx="12" cy="5" r="2"/><path d="M12 7v4"/><line x1="8" y1="16" x2="8" y2="16"/><line x1="16" y1="16" x2="16" y2="16"/></>} />;

        // --- Gemini API Key (실제 키를 여기에 입력해야 작동합니다) ---
        const apiKey = "AIzaSyBf8iy2LdZYsh1TmJ00O0F6oftGPPFHLY4"; 

        // --- 데이터 영역 (총 9개 과목) ---
        const curriculumData = [
          {
            id: 'science',
            title: '과학과제 연구',
            icon: <Lightbulb size={24} />,
            color: 'bg-emerald-100 text-emerald-700',
            description: '과학적 탐구 능력을 키우고 연구 과정을 체험하는 과목',
            tabs: [
              {
                name: '성격 및 목표',
                content: (
                  <div className="space-y-6">
                    <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                      <h3 className="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <Target className="text-emerald-600" /> 성격
                      </h3>
                      <p className="text-gray-600 leading-relaxed mb-4">
                        ‘과학과제 연구’는 과학 핵심 개념의 통합적인 이해 및 과학의 탐구 경험을 통하여 다양한 탐구 중심의 학습을 위한 과목입니다.
                        토론과 조사를 거쳐 특정 과학과제를 선정하여 실험·실습을 수행하고 결론을 도출하여 보고서를 작성하는 일련의 연구 과정을 체험합니다.
                      </p>
                    </div>
                    <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                      <h3 className="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <Target className="text-emerald-600" /> 목표
                      </h3>
                      <ul className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-2">
                        {["다양한 문제를 인식하고 과학적으로 해결하려는 태도 함양", "자연과 일상생활의 문제를 과학적으로 연구하는 능력 배양", "과학 연구 방법을 이해하고 적용", "과학-기술-사회 상호 관계 이해"].map((goal, idx) => (
                          <li key={idx} className="bg-emerald-50 p-3 rounded border border-emerald-100 text-sm text-gray-700 flex gap-2">
                            <span className="font-bold text-emerald-600">{idx + 1}.</span> {goal}
                          </li>
                        ))}
                      </ul>
                    </div>
                  </div>
                )
              },
              {
                name: '내용 체계',
                content: (
                  <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100 overflow-x-auto">
                    <h3 className="text-xl font-bold text-gray-800 mb-4">핵심 내용 요소</h3>
                    <table className="w-full text-sm text-left text-gray-500 border-collapse">
                      <thead className="text-xs text-gray-700 uppercase bg-gray-50">
                        <tr>
                          <th className="px-6 py-3 border w-1/3">범주</th>
                          <th className="px-6 py-3 border">내용 요소</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td className="px-6 py-4 border font-medium">문제 탐색 및 선정</td>
                          <td className="px-6 py-4 border">과학 연구 방법론, 연구 윤리, 문헌 조사, 주제 선정</td>
                        </tr>
                        <tr>
                          <td className="px-6 py-4 border font-medium">설계 및 수행</td>
                          <td className="px-6 py-4 border">연구 설계, 자료 수집, 변인 통제, 데이터 변환</td>
                        </tr>
                        <tr>
                          <td className="px-6 py-4 border font-medium">결론 도출 및 공유</td>
                          <td className="px-6 py-4 border">결과 해석, 결론 도출, 보고서 작성, 발표 및 토론</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                )
              },
              {
                name: '교수·학습 및 평가',
                content: (
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                      <h3 className="text-lg font-bold text-gray-800 mb-3 text-emerald-700">교수·학습 방법</h3>
                      <ul className="list-disc list-inside text-sm text-gray-600 space-y-2">
                        <li>학생 주도의 프로젝트 기반 학습(PBL)</li>
                        <li>디지털 탐구 도구(MBL, 시뮬레이션) 활용</li>
                        <li>연구 노트 작성 및 동료 피드백 활성화</li>
                      </ul>
                    </div>
                    <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                      <h3 className="text-lg font-bold text-gray-800 mb-3 text-emerald-700">평가 방법</h3>
                      <ul className="list-disc list-inside text-sm text-gray-600 space-y-2">
                        <li>연구 계획서, 수행 과정, 최종 보고서 포트폴리오 평가</li>
                        <li>발표 및 질의응답을 통한 구술 평가</li>
                        <li>과정 중심의 수행평가 확대</li>
                      </ul>
                    </div>
                  </div>
                )
              }
            ]
          },
          {
            id: 'bio_exp',
            title: '생명과학실험',
            icon: <FlaskConical size={24} />,
            color: 'bg-green-100 text-green-700',
            description: '생명 현상을 실험과 실습을 통해 탐구하는 과목',
            tabs: [
              {
                name: '성격 및 목표',
                content: (
                  <div className="space-y-6">
                    <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                      <h3 className="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <Target className="text-green-600" /> 성격
                      </h3>
                      <p className="text-gray-600 leading-relaxed">
                        ‘생명과학실험’은 생명과학의 핵심 개념을 실험, 실습, 탐구 활동을 통해 심화 학습하는 과목입니다. 
                        세포, 유전, 생리 등 다양한 영역의 실험을 수행하며 생명 현상에 대한 호기심과 탐구 능력을 기릅니다.
                      </p>
                    </div>
                    <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                       <h3 className="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <Target className="text-green-600" /> 목표
                      </h3>
                       <ul className="list-disc list-inside text-gray-600 space-y-2">
                        <li>생명과학의 탐구 방법을 습득하여 실제 실험에 적용한다.</li>
                        <li>현미경 조작, 표본 제작 등 기초 실험 기능을 숙달한다.</li>
                        <li>실험 결과를 분석하고 결론을 도출하는 과학적 사고력을 기른다.</li>
                        <li>생명 존중의 태도와 실험 안전 수칙을 준수한다.</li>
                      </ul>
                    </div>
                  </div>
                )
              },
              {
                name: '내용 체계',
                content: (
                   <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                    <h3 className="text-xl font-bold text-gray-800 mb-4">주요 학습 주제</h3>
                    <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                      {[
                        { title: "세포와 물질대사", desc: "현미경 관찰, 삼투압 실험, 효소 반응 실험" },
                        { title: "유전과 진화", desc: "핵형 분석, 초파리 교배 실험, DNA 추출" },
                        { title: "항상성과 몸의 조절", desc: "호르몬 작용, 신경 전도 모의 실험" },
                        { title: "생태와 환경", desc: "개체군 조사, 환경 오염 측정 실험" }
                      ].map((item, idx) => (
                        <div key={idx} className="p-4 bg-green-50 rounded-lg border border-green-100">
                          <div className="font-bold text-green-800 mb-1">{item.title}</div>
                          <div className="text-sm text-gray-600">{item.desc}</div>
                        </div>
                      ))}
                    </div>
                  </div>
                )
              },
              {
                name: '교수·학습 및 평가',
                content: (
                  <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                    <h3 className="font-bold text-gray-800 mb-2 text-green-700">실험 실습 중심 교육</h3>
                    <p className="text-gray-600 mb-4">
                      모든 수업은 학생이 직접 참여하는 실험으로 진행되며, 실험 설계부터 보고서 작성까지 전 과정을 평가합니다.
                    </p>
                    <div className="bg-gray-50 p-4 rounded text-sm text-gray-700">
                      <strong>평가 요소:</strong> 실험 기구 조작 능력, 데이터 분석 정확성, 협력적 태도, 연구 윤리 준수
                    </div>
                  </div>
                )
              }
            ]
          },
          {
            id: 'film',
            title: '영화 제작 실습',
            icon: <Clapperboard size={24} />,
            color: 'bg-red-100 text-red-700',
            description: '영화 기획부터 촬영, 편집까지 전 과정을 체험하는 예술 실습',
            tabs: [
              {
                name: '성격 및 목표',
                content: (
                  <div className="space-y-6">
                    <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                       <h3 className="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <Target className="text-red-600" /> 성격
                      </h3>
                      <p className="text-gray-600 leading-relaxed">
                        ‘영화 제작 실습’은 영상 언어에 대한 이해를 바탕으로 학생들이 직접 이야기를 창작하고 영상화하는 예술 전문 과목입니다. 
                        협업을 통해 작품을 완성하며 창의적 표현력과 미적 감수성을 함양합니다.
                      </p>
                    </div>
                     <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                       <h3 className="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <Target className="text-red-600" /> 목표
                      </h3>
                      <ul className="list-disc list-inside text-gray-600 space-y-2">
                        <li>영화 제작의 전체 흐름(프리프로덕션-프로덕션-포스트프로덕션)을 이해한다.</li>
                        <li>촬영 장비, 조명, 편집 프로그램을 능숙하게 다룬다.</li>
                        <li>팀원과 소통하며 공동의 예술적 목표를 달성하는 협업 능력을 기른다.</li>
                      </ul>
                    </div>
                  </div>
                )
              },
              {
                name: '내용 체계',
                content: (
                  <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                     <div className="flex flex-col md:flex-row gap-4 items-center justify-between text-center md:text-left">
                        <div className="flex-1 p-4 bg-red-50 rounded-lg w-full">
                          <div className="font-bold text-red-800 mb-2">기획 (Pre-Production)</div>
                          <div className="text-sm text-gray-600">아이디어 발상, 시나리오 작성, 콘티 제작, 캐스팅</div>
                        </div>
                        <ChevronRight className="hidden md:block text-gray-300" />
                        <div className="flex-1 p-4 bg-red-50 rounded-lg w-full">
                          <div className="font-bold text-red-800 mb-2">촬영 (Production)</div>
                          <div className="text-sm text-gray-600">연출, 촬영(카메라 워킹), 조명 세팅, 동시 녹음</div>
                        </div>
                        <ChevronRight className="hidden md:block text-gray-300" />
                         <div className="flex-1 p-4 bg-red-50 rounded-lg w-full">
                          <div className="font-bold text-red-800 mb-2">편집 (Post-Production)</div>
                          <div className="text-sm text-gray-600">컷 편집, 색보정(DI), 사운드 믹싱, 자막 작업, 시사회</div>
                        </div>
                     </div>
                  </div>
                )
              },
              {
                name: '교수·학습 및 평가',
                content: (
                  <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                     <h3 className="text-lg font-bold text-gray-800 mb-3 text-red-700">프로젝트 중심 평가</h3>
                     <ul className="space-y-3 text-sm text-gray-600">
                       <li className="flex gap-2">
                         <div className="min-w-1.5 h-1.5 rounded-full bg-red-500 mt-1.5"></div>
                         단편 영화 제작 프로젝트 수행 결과물(작품성, 완성도) 평가
                       </li>
                       <li className="flex gap-2">
                         <div className="min-w-1.5 h-1.5 rounded-full bg-red-500 mt-1.5"></div>
                         제작 일지 및 역할 수행에 대한 동료 평가 반영
                       </li>
                       <li className="flex gap-2">
                         <div className="min-w-1.5 h-1.5 rounded-full bg-red-500 mt-1.5"></div>
                         영화제 출품 또는 교내 상영회 개최
                       </li>
                     </ul>
                  </div>
                )
              }
            ]
          },
          {
            id: 'nursing',
            title: '간호의 기초',
            icon: <HeartPulse size={24} />,
            color: 'bg-rose-100 text-rose-700',
            description: '보건·의료 분야 진로를 위한 기초 지식과 소양 함양',
            tabs: [
              {
                name: '성격 및 목표',
                content: (
                   <div className="space-y-6">
                    <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                       <h3 className="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <Target className="text-rose-600" /> 성격
                      </h3>
                      <p className="text-gray-600 leading-relaxed">
                        ‘간호의 기초’는 간호 및 보건 계열 진학을 희망하는 학생들에게 간호에 대한 올바른 이해와 기초 지식을 제공하는 과목입니다. 
                        인간의 건강과 생명을 다루는 전문직으로서의 윤리관을 확립하고 기초 간호술을 익힙니다.
                      </p>
                    </div>
                     <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                       <h3 className="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <Target className="text-rose-600" /> 목표
                      </h3>
                      <ul className="list-disc list-inside text-gray-600 space-y-2">
                        <li>간호의 역사와 간호사의 역할 및 자질을 이해한다.</li>
                        <li>인체의 구조와 기능, 질병 예방에 대한 기초 지식을 습득한다.</li>
                        <li>활력징후 측정 등 기본적인 간호 기술을 수행할 수 있다.</li>
                        <li>생명 윤리 의식을 함양하고 봉사하는 태도를 기른다.</li>
                      </ul>
                    </div>
                  </div>
                )
              },
              {
                name: '내용 체계',
                content: (
                  <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                     <h3 className="text-xl font-bold text-gray-800 mb-4">학습 영역</h3>
                     <div className="space-y-4">
                       {[
                         { title: "간호의 이해", desc: "간호의 정의, 역사, 보건 의료 체계" },
                         { title: "인체와 건강", desc: "인체 해부 생리 기초, 생애주기별 건강 관리" },
                         { title: "기초 간호 임상 실무", desc: "활력징후(혈압, 체온 등) 측정, 감염 관리, 응급 처치(CPR)" },
                         { title: "보건 간호", desc: "지역사회 보건, 환경 보건, 질병 관리" }
                       ].map((item, idx) => (
                         <div key={idx} className="flex items-start gap-4 p-3 border-b border-gray-50 last:border-0">
                            <div className="bg-rose-50 text-rose-700 px-3 py-1 rounded-full text-xs font-bold whitespace-nowrap">{item.title}</div>
                            <div className="text-sm text-gray-600">{item.desc}</div>
                         </div>
                       ))}
                     </div>
                  </div>
                )
              },
              {
                name: '교수·학습 및 평가',
                content: (
                  <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                     <div className="flex gap-4 mb-4">
                        <div className="flex-1 bg-gray-50 p-4 rounded-lg">
                           <h4 className="font-bold text-rose-700 mb-2">실습 중심 수업</h4>
                           <p className="text-xs text-gray-500">혈압 측정, 붕대 감기, 심폐소생술 등 모형을 활용한 실습 위주 진행</p>
                        </div>
                        <div className="flex-1 bg-gray-50 p-4 rounded-lg">
                           <h4 className="font-bold text-rose-700 mb-2">진로 탐색</h4>
                           <p className="text-xs text-gray-500">병원 견학, 현직 간호사 초청 특강 등을 통한 직업 이해도 제고</p>
                        </div>
                     </div>
                  </div>
                )
              }
            ]
          },
          {
            id: 'robot',
            title: '로봇 기구 개발',
            icon: <Monitor size={24} />,
            color: 'bg-blue-100 text-blue-700',
            description: '로봇 기구, 주변 장치, 툴 등을 설계 및 제작하는 실무 과목',
            tabs: [
              {
                name: '성격 및 목표',
                content: (
                  <div className="space-y-6">
                    <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                      <h3 className="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <Target className="text-blue-600" /> 성격
                      </h3>
                      <p className="text-gray-600 leading-relaxed">
                        ‘로봇 기구 개발’ 과목은 전자과 학생들이 로봇 수요자의 요구 분석 결과에 따라 로봇 기구, 주변 장치, 툴(tool) 등을 설계 및 제작하고 시험 평가 결과를 반영하여 로봇 기구를 개발하는 직무를 수행할 수 있는 능력을 기르기 위한 전공 실무 과목입니다.
                      </p>
                    </div>
                     <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                      <h3 className="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <Target className="text-blue-600" /> 목표
                      </h3>
                      <ul className="list-decimal list-inside text-gray-600 space-y-3">
                        <li>로봇 산업 중요성 인식 및 디지털 정보 활용 역량 함양</li>
                        <li>직무 수행과 문제 해결을 위한 의사소통 및 창의적 사고 역량 함양</li>
                        <li>설계, 제작, 조립, 시험, 운용, 유지보수 등 실무 기술 습득</li>
                      </ul>
                    </div>
                  </div>
                )
              },
               {
                name: '내용 체계',
                content: (
                  <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                    <h3 className="text-xl font-bold text-gray-800 mb-4">12가지 핵심 학습 요소</h3>
                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
                      {[
                        "로봇 기구 개념 설계", "로봇 기구 주변 장치 설계", "로봇 엔드 이펙터 설계",
                        "로봇 기구 개발 환경/규정 검토", "로봇 기구 상세 설계", "로봇 기구 제작도 작성",
                        "로봇 부품 구매 및 가공", "로봇 부품 검사 및 조립", "로봇 통합 및 기능 시험",
                        "로봇 성능 및 신뢰성 시험", "로봇 운용", "로봇 유지 보수"
                      ].map((item, idx) => (
                        <div key={idx} className="bg-blue-50 hover:bg-blue-100 transition-colors p-3 rounded-md text-blue-900 text-sm font-medium flex items-center gap-2">
                          <span className="bg-blue-200 w-6 h-6 flex items-center justify-center rounded-full text-xs">{idx + 1}</span>
                          {item}
                        </div>
                      ))}
                    </div>
                  </div>
                )
              },
              {
                name: '교수·학습 및 평가',
                content: (
                   <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                      <h3 className="text-lg font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <BookOpen size={20} className="text-blue-600" /> 교수·학습 전략
                      </h3>
                      <ul className="space-y-3 text-sm text-gray-600">
                        <li className="flex gap-2"><div className="min-w-1.5 h-1.5 rounded-full bg-blue-500 mt-1.5"></div>프로젝트 기반 학습 (설계부터 제작, 시험까지)</li>
                        <li className="flex gap-2"><div className="min-w-1.5 h-1.5 rounded-full bg-blue-500 mt-1.5"></div>CAD, 시뮬레이션 등 디지털 도구 활용</li>
                        <li className="flex gap-2"><div className="min-w-1.5 h-1.5 rounded-full bg-blue-500 mt-1.5"></div>산업체 연계 및 현장성 있는 실습</li>
                      </ul>
                    </div>
                    <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                      <h3 className="text-lg font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <ClipboardList size={20} className="text-blue-600" /> 평가 전략
                      </h3>
                       <ul className="space-y-3 text-sm text-gray-600">
                        <li className="flex gap-2"><div className="min-w-1.5 h-1.5 rounded-full bg-blue-500 mt-1.5"></div>NCS 능력단위 기반의 과정 및 결과 평가</li>
                        <li className="flex gap-2"><div className="min-w-1.5 h-1.5 rounded-full bg-blue-500 mt-1.5"></div>설계 도면, BOM, 검사 성적서 등 산출물 평가</li>
                      </ul>
                    </div>
                  </div>
                )
              }
            ]
          },
          {
            id: 'semiconductor',
            title: '반도체 기초',
            icon: <Cpu size={24} />,
            color: 'bg-purple-100 text-purple-700',
            description: '반도체 산업 이해와 기초 지식을 함양하는 입문 과목',
            tabs: [
              {
                name: '성격 및 목표',
                content: (
                  <div className="space-y-6">
                    <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                      <h3 className="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <Target className="text-purple-600" /> 성격
                      </h3>
                      <p className="text-gray-600 leading-relaxed">
                        ‘반도체 기초’는 반도체 산업에 대한 이해와 기초 지식 및 태도를 함양하기 위한 입문 성격의 과목입니다. 반도체 엔지니어로 성장하기 위한 기초 소양을 기르고, 경력 개발을 설계할 수 있는 능력을 키웁니다.
                      </p>
                    </div>
                     <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                      <h3 className="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <Target className="text-purple-600" /> 목표
                      </h3>
                      <ul className="list-disc list-inside text-gray-600 space-y-2">
                        <li>반도체 개념 이해 및 산업 구조, 직무 파악</li>
                        <li>디지털 전환에 따른 반도체 기술 변화 이해</li>
                        <li>반도체 기초 이론(물성) 및 소자 원리 습득</li>
                        <li>엔지니어로서의 협력적 소통 및 창의적 사고 역량 함양</li>
                      </ul>
                    </div>
                  </div>
                )
              },
              {
                name: '내용 체계',
                content: (
                  <div className="space-y-6">
                    <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                      <h3 className="text-lg font-bold text-gray-800 mb-4">학습 영역 구성</h3>
                      <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div className="bg-purple-50 p-4 rounded-lg border border-purple-100">
                          <div className="font-bold text-purple-800 mb-2">1. 반도체 개념</div>
                          <ul className="text-sm text-gray-600 space-y-1">
                            <li>- 반도체 개요 및 제품 종류</li>
                            <li>- 반도체 산업 구조 및 시장</li>
                            <li>- 직무 요건 및 엔지니어 소양</li>
                          </ul>
                        </div>
                        <div className="bg-purple-50 p-4 rounded-lg border border-purple-100">
                          <div className="font-bold text-purple-800 mb-2">2. 반도체 특성</div>
                          <ul className="text-sm text-gray-600 space-y-1">
                            <li>- 물리적 특성 (원자구조, 밴드이론)</li>
                            <li>- 반도체 기초 (캐리어 농도/운동)</li>
                          </ul>
                        </div>
                        <div className="bg-purple-50 p-4 rounded-lg border border-purple-100">
                          <div className="font-bold text-purple-800 mb-2">3. 반도체 소자</div>
                          <ul className="text-sm text-gray-600 space-y-1">
                            <li>- 수동소자, 다이오드</li>
                            <li>- BJT, MOSFET</li>
                            <li>- CMOS 이미지 센서</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                )
              },
              {
                name: '교수·학습 및 평가',
                content: (
                  <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                     <div className="bg-purple-50 p-4 rounded-lg mb-4">
                        <h4 className="font-bold text-purple-800 mb-2">진로 연계 활동</h4>
                        <p className="text-sm text-gray-600">반도체 엔지니어 성장 로드맵 설계, 산업체 직무 분석, 현장 견학 등을 통해 학생 스스로 진로를 탐색하도록 지도합니다.</p>
                     </div>
                     <div className="bg-purple-50 p-4 rounded-lg">
                        <h4 className="font-bold text-purple-800 mb-2">평가 방향</h4>
                        <p className="text-sm text-gray-600">기초 이론에 대한 이해도 평가와 함께, 로드맵 설계 등 진로 탐색 활동에 대한 포트폴리오 평가를 병행합니다.</p>
                     </div>
                  </div>
                )
              }
            ]
          },
          {
            id: 'culture',
            title: '비교 문화',
            icon: <Scale size={24} />,
            color: 'bg-orange-100 text-orange-700',
            description: '다양한 문화의 특징을 비교하고 이해하는 인문·사회 과목',
            tabs: [
              {
                name: '성격 및 목표',
                content: (
                  <div className="space-y-6">
                    <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                      <h3 className="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <Target className="text-orange-600" /> 성격
                      </h3>
                      <p className="text-gray-600 leading-relaxed">
                        ‘비교 문화’는 세계 여러 문화권의 생활양식, 가치관, 사회 구조 등을 비교·분석하여 문화의 다양성과 보편성을 이해하는 과목입니다. 
                        자문화 중심주의를 극복하고 문화 상대주의적 태도를 함양하여 세계 시민으로서의 자질을 기릅니다.
                      </p>
                    </div>
                    <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                       <h3 className="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <Target className="text-orange-600" /> 목표
                      </h3>
                      <ul className="list-disc list-inside text-gray-600 space-y-2">
                        <li>문화의 의미와 속성, 문화 변동의 원리를 이해한다.</li>
                        <li>세계 주요 문화권의 특징을 환경적, 역사적 배경과 관련지어 파악한다.</li>
                        <li>다문화 사회의 갈등을 해결하고 공존하기 위한 방안을 모색한다.</li>
                      </ul>
                    </div>
                  </div>
                )
              },
              {
                name: '내용 체계',
                content: (
                  <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                    <h3 className="text-xl font-bold text-gray-800 mb-4">주요 학습 주제</h3>
                     <ul className="space-y-4">
                       {[
                         { title: "문화의 이해", desc: "문화의 정의, 보편성과 특수성, 자문화 중심주의와 사대주의, 문화 상대주의" },
                         { title: "문화권의 특징", desc: "아시아, 유럽, 아메리카, 아프리카 등 지역별 의식주, 종교, 예술 비교" },
                         { title: "문화 변동과 세계화", desc: "문화 전파, 문화 융합, 세계화에 따른 문화 획일화와 다양성" },
                         { title: "다문화 사회와 공존", desc: "우리나라의 다문화 현상, 문화적 차이로 인한 갈등 해결, 관용" }
                       ].map((item, idx) => (
                         <li key={idx} className="bg-orange-50 p-4 rounded-lg">
                            <span className="block font-bold text-orange-800 mb-1">{item.title}</span>
                            <span className="text-sm text-gray-600">{item.desc}</span>
                         </li>
                       ))}
                     </ul>
                  </div>
                )
              },
              {
                name: '교수·학습 및 평가',
                content: (
                  <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                     <div className="mb-4">
                        <h4 className="font-bold text-orange-700 mb-2">토의·토론 중심 수업</h4>
                        <p className="text-sm text-gray-600">특정 문화 현상에 대한 찬반 토론, 문화 체험 보고서 작성 등을 통해 비판적 사고력을 기릅니다.</p>
                     </div>
                     <div>
                        <h4 className="font-bold text-orange-700 mb-2">평가 방법</h4>
                        <p className="text-sm text-gray-600">문화 비교 조사 보고서, 다문화 포스터 제작, 에세이 쓰기 등 수행평가 비중을 높여 평가합니다.</p>
                     </div>
                  </div>
                )
              }
            ]
          },
          {
            id: 'global',
            title: '세계문제와 미래사회',
            icon: <Globe2 size={24} />,
            color: 'bg-indigo-100 text-indigo-700',
            description: '지구촌의 다양한 문제와 미래 사회의 변화를 탐구하는 과목',
            tabs: [
              {
                name: '성격 및 목표',
                content: (
                  <div className="space-y-6">
                    <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                      <h3 className="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <Target className="text-indigo-600" /> 성격
                      </h3>
                      <p className="text-gray-600 leading-relaxed">
                        ‘세계문제와 미래사회’는 기후변화, 빈곤, 전쟁, 인권 등 현대 사회가 직면한 복잡한 문제들을 통합적인 관점에서 이해하고, 
                        지속 가능한 미래를 위한 해결 방안을 모색하는 융합형 과목입니다.
                      </p>
                    </div>
                     <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                       <h3 className="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <Target className="text-indigo-600" /> 목표
                      </h3>
                      <ul className="list-disc list-inside text-gray-600 space-y-2">
                        <li>세계 문제의 원인과 현상을 정치, 경제, 문화적 측면에서 분석한다.</li>
                        <li>국제기구, 비정부 기구(NGO), 국가 간 협력의 중요성을 이해한다.</li>
                        <li>미래 사회의 변화(AI, 생명공학 등)를 예측하고 능동적으로 대처하는 태도를 기른다.</li>
                      </ul>
                    </div>
                  </div>
                )
              },
              {
                name: '내용 체계',
                content: (
                  <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                     <h3 className="text-xl font-bold text-gray-800 mb-4">핵심 이슈</h3>
                     <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {[
                          { title: "지구 환경 문제", desc: "기후 위기, 탄소 중립, 에너지 문제" },
                          { title: "평화와 갈등", desc: "국가 간 분쟁, 테러, 난민 문제, 평화 유지 활동" },
                          { title: "인권과 불평등", desc: "세계의 빈곤, 기아, 아동 노동, 성 차별" },
                          { title: "미래 기술과 윤리", desc: "인공지능 윤리, 생명 공학의 빛과 그림자" }
                        ].map((item, idx) => (
                          <div key={idx} className="bg-indigo-50 p-4 rounded-lg">
                             <div className="font-bold text-indigo-800 mb-1">{item.title}</div>
                             <div className="text-sm text-gray-600">{item.desc}</div>
                          </div>
                        ))}
                     </div>
                  </div>
                )
              },
              {
                name: '교수·학습 및 평가',
                content: (
                  <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                     <h4 className="font-bold text-indigo-700 mb-3">문제 해결형 프로젝트</h4>
                     <ul className="list-decimal list-inside text-sm text-gray-600 space-y-2">
                       <li>관심 있는 세계 문제를 선정하여 심층 조사</li>
                       <li>해결 방안을 담은 캠페인 활동 또는 정책 제안서 작성</li>
                       <li>모의 유엔(MUN) 활동 등을 통한 국제 회의 체험</li>
                     </ul>
                  </div>
                )
              }
            ]
          },
          {
            id: 'japanese',
            title: '전공기초 일본어',
            icon: <Languages size={24} />,
            color: 'bg-pink-100 text-pink-700',
            description: '일본어 의사소통 능력과 일본 문화에 대한 기초를 다지는 과목',
            tabs: [
              {
                name: '성격 및 목표',
                content: (
                  <div className="space-y-6">
                    <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                      <h3 className="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <Target className="text-pink-600" /> 성격
                      </h3>
                      <p className="text-gray-600 leading-relaxed">
                        ‘전공기초 일본어’는 일본어 관련 학과 진학이나 직업 선택을 목표로 하는 학생들을 위한 기초 과목입니다. 
                        정확한 발음과 문자 표기, 기초적인 생활 회화 능력을 기르고 일본 문화에 대한 이해를 넓힙니다.
                      </p>
                    </div>
                     <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                       <h3 className="text-xl font-bold text-gray-800 mb-3 flex items-center gap-2">
                        <Target className="text-pink-600" /> 목표
                      </h3>
                      <ul className="list-disc list-inside text-gray-600 space-y-2">
                        <li>히라가나, 가타카나 및 기초 한자를 읽고 쓸 수 있다.</li>
                        <li>일상생활에 필요한 기초적인 의사소통 표현을 익힌다.</li>
                        <li>일본의 언어 예절과 문화를 이해하여 적절하게 반응한다.</li>
                      </ul>
                    </div>
                  </div>
                )
              },
              {
                name: '내용 체계',
                content: (
                  <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                    <h3 className="text-xl font-bold text-gray-800 mb-4">학습 내용</h3>
                    <table className="w-full text-sm text-left text-gray-500 border-collapse">
                      <tbody>
                        <tr className="border-b border-pink-100">
                          <td className="py-3 font-bold text-pink-700 w-1/4">문자/어휘</td>
                          <td className="py-3">가나(청음, 탁음, 반탁음 등), 기초 생활 어휘, 기본 한자</td>
                        </tr>
                        <tr className="border-b border-pink-100">
                          <td className="py-3 font-bold text-pink-700">의사소통</td>
                          <td className="py-3">인사하기, 소개하기, 길 묻기, 물건 사기, 제안하기</td>
                        </tr>
                         <tr>
                          <td className="py-3 font-bold text-pink-700">문화</td>
                          <td className="py-3">일본의 연중행사, 식문화, 대중문화, 언어 예절</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                )
              },
              {
                name: '교수·학습 및 평가',
                content: (
                  <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                     <div className="grid grid-cols-1 sm:grid-cols-2 gap-4">
                       <div className="bg-pink-50 p-4 rounded-lg">
                          <h4 className="font-bold text-pink-800 mb-2">실습 활동</h4>
                          <p className="text-sm text-gray-600">롤플레이(역할극), 일본어 노래 부르기, 문자 디자인하기, 일본 문화 체험 등</p>
                       </div>
                       <div className="bg-pink-50 p-4 rounded-lg">
                          <h4 className="font-bold text-pink-800 mb-2">평가</h4>
                          <p className="text-sm text-gray-600">말하기 수행평가(발음, 억양), 쓰기 과제(작문), 문화 이해도 평가</p>
                       </div>
                     </div>
                  </div>
                )
              }
            ]
          }
        ];

        // --- Gemini API 호출 함수 ---
        const callGeminiAPI = async (prompt, systemInstruction = "") => {
          try {
            const response = await fetch(
              `https://generativelanguage.googleapis.com/v1beta/models/gemini-flash-lite-latest:generateContent?key=${apiKey}`,
              {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                  contents: [{ parts: [{ text: prompt }] }],
                  systemInstruction: { parts: [{ text: systemInstruction }] }
                }),
              }
            );

            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();
            return data.candidates[0].content.parts[0].text;
          } catch (error) {
            console.error("Gemini API Error:", error);
            return "죄송합니다. 오류가 발생하여 답변을 생성할 수 없습니다. 잠시 후 다시 시도해 주세요.";
          }
        };

        // --- Chatbot Component ---
        const AIChatBot = () => {
          const [isOpen, setIsOpen] = useState(false);
          const [messages, setMessages] = useState([
            { role: 'model', text: '안녕하세요! 👋 안성시 공동교육과정 AI 상담사입니다. 어떤 과목을 선택해야 할지 고민되시나요? 관심사나 진로를 말씀해 주시면 딱 맞는 과목을 추천해 드릴게요!' }
          ]);
          const [inputText, setInputText] = useState("");
          const [isLoading, setIsLoading] = useState(false);
          const messagesEndRef = useRef(null);

          const scrollToBottom = () => {
            messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
          };

          useEffect(() => {
            scrollToBottom();
          }, [messages]);

          const handleSendMessage = async () => {
            if (!inputText.trim()) return;

            const userMessage = inputText;
            setMessages(prev => [...prev, { role: 'user', text: userMessage }]);
            setInputText("");
            setIsLoading(true);

            const systemPrompt = `
              당신은 안성시교육청 공동교육과정의 친절한 AI 상담사입니다.
              학생들의 진로 고민을 듣고, 다음 교육과정 데이터를 바탕으로 가장 적합한 과목을 추천하고 학습 로드맵을 제안해 주세요.
              답변은 친근하고 격려하는 말투(~해요, ~합니다)를 사용하고, 이모지를 적절히 사용하여 학생들의 흥미를 유발하세요.

              [교육과정 데이터]
              ${JSON.stringify(curriculumData.map(c => ({ title: c.title, description: c.description, id: c.id })))}

              학생이 "간호사가 되고 싶어"라고 하면 '간호의 기초'와 '생명과학실험'을 추천하는 식입니다.
              학생의 질문:
            `;

            const aiResponse = await callGeminiAPI(userMessage, systemPrompt);
            
            setMessages(prev => [...prev, { role: 'model', text: aiResponse }]);
            setIsLoading(false);
          };

          return (
            <React.Fragment>
              {/* Floating Button */}
              <button
                onClick={() => setIsOpen(!isOpen)}
                className="fixed bottom-6 right-6 bg-gradient-to-r from-indigo-500 to-purple-600 text-white p-4 rounded-full shadow-xl hover:shadow-2xl transition-all z-50 flex items-center gap-2 group"
              >
                {isOpen ? <X size={24} /> : <Bot size={28} />}
                {!isOpen && <span className="max-w-0 overflow-hidden group-hover:max-w-xs transition-all duration-500 ease-in-out whitespace-nowrap">AI 상담소</span>}
              </button>

              {/* Chat Interface */}
              {isOpen && (
                <div className="fixed bottom-24 right-6 w-80 md:w-96 h-[500px] bg-white rounded-2xl shadow-2xl z-50 flex flex-col overflow-hidden border border-gray-100 animate-fade-in-up">
                  <div className="bg-gradient-to-r from-indigo-500 to-purple-600 p-4 text-white flex justify-between items-center">
                    <div className="flex items-center gap-2">
                      <Sparkles size={20} />
                      <span className="font-bold">AI 진로 상담소</span>
                    </div>
                    <button onClick={() => setIsOpen(false)} className="hover:bg-white/20 rounded-full p-1"><X size={18} /></button>
                  </div>
                  
                  <div className="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50">
                    {messages.map((msg, idx) => (
                      <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                        <div className={`max-w-[85%] p-3 rounded-2xl text-sm leading-relaxed ${
                          msg.role === 'user' 
                            ? 'bg-indigo-500 text-white rounded-br-none shadow-md' 
                            : 'bg-white text-gray-700 rounded-tl-none border border-gray-200 shadow-sm'
                        }`}>
                          {msg.text.split('\n').map((line, i) => <p key={i} className="min-h-[1rem]">{line}</p>)}
                        </div>
                      </div>
                    ))}
                    {isLoading && (
                      <div className="flex justify-start">
                        <div className="bg-white p-3 rounded-2xl rounded-tl-none border border-gray-200 shadow-sm flex items-center gap-2 text-gray-400 text-sm">
                          <Loader2 className="animate-spin" size={16} />
                          답변을 생각하고 있어요...
                        </div>
                      </div>
                    )}
                    <div ref={messagesEndRef} />
                  </div>

                  <div className="p-3 bg-white border-t border-gray-100">
                    <form 
                      onSubmit={(e) => { e.preventDefault(); handleSendMessage(); }}
                      className="flex gap-2"
                    >
                      <input
                        type="text"
                        value={inputText}
                        onChange={(e) => setInputText(e.target.value)}
                        placeholder="관심사나 꿈을 말해주세요..."
                        className="flex-1 p-2 bg-gray-100 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
                      />
                      <button 
                        type="submit"
                        disabled={isLoading || !inputText.trim()}
                        className="p-2 bg-indigo-500 text-white rounded-xl hover:bg-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                      >
                        <Send size={18} />
                      </button>
                    </form>
                  </div>
                </div>
              )}
            </React.Fragment>
          );
        };

        function App() {
          const [activeSubjectId, setActiveSubjectId] = useState('home');
          const [isSidebarOpen, setIsSidebarOpen] = useState(false);
          const [activeTab, setActiveTab] = useState(0);
          const [summary, setSummary] = useState("");
          const [isSummarizing, setIsSummarizing] = useState(false);

          const activeSubject = curriculumData.find(c => c.id === activeSubjectId);

          const handleSubjectChange = (id) => {
            setActiveSubjectId(id);
            setActiveTab(0);
            setSummary(""); // Reset summary on subject change
            setIsSidebarOpen(false);
          };

          const handleTabChange = (idx) => {
            setActiveTab(idx);
            setSummary(""); // Reset summary on tab change
          }

          const generateSummary = async () => {
            if (!activeSubject) return;
            setIsSummarizing(true);
            
            const currentTabName = activeSubject.tabs[activeTab].name;
            
            const refinedPrompt = `
              안성시 교육과정의 '${activeSubject.title}' 과목 중 '${currentTabName}' 부분에 대해 학생들을 위해 핵심 요약을 3줄로 작성해줘.
              과목 설명: ${activeSubject.description}
            `;

            const result = await callGeminiAPI(refinedPrompt);
            setSummary(result);
            setIsSummarizing(false);
          };

          return (
            <div className="min-h-screen bg-gray-50 flex flex-col md:flex-row font-sans text-gray-800">
              {/* Mobile Header */}
              <div className="md:hidden bg-white p-4 flex justify-between items-center shadow-sm z-20 sticky top-0">
                <div className="font-bold text-lg text-emerald-800">안성시교육청</div>
                <button onClick={() => setIsSidebarOpen(!isSidebarOpen)} className="p-2">
                  {isSidebarOpen ? <X /> : <Menu />}
                </button>
              </div>

              {/* Sidebar Navigation */}
              <aside className={`
                fixed md:sticky top-0 left-0 h-full w-72 bg-white shadow-lg md:shadow-none z-10 transform transition-transform duration-300 ease-in-out border-r border-gray-200 overflow-y-auto
                ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full'} md:translate-x-0 md:h-screen
              `}>
                <div className="p-6 border-b border-gray-100 hidden md:block">
                  <h1 className="text-xl font-extrabold text-emerald-800 flex items-center gap-2">
                    <GraduationCap />
                    공동교육과정
                  </h1>
                  <p className="text-xs text-gray-500 mt-1">안성시교육청</p>
                </div>

                <nav className="p-4 space-y-2">
                  <button
                    onClick={() => handleSubjectChange('home')}
                    className={`w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 transition-colors ${activeSubjectId === 'home' ? 'bg-emerald-50 text-emerald-700 font-bold' : 'text-gray-600 hover:bg-gray-50'}`}
                  >
                    <BookOpen size={20} />
                    과정 소개
                  </button>
                  
                  <div className="pt-4 pb-2 px-4 text-xs font-semibold text-gray-400 uppercase tracking-wider">개설 과목</div>
                  
                  {curriculumData.map((subject) => (
                    <button
                      key={subject.id}
                      onClick={() => handleSubjectChange(subject.id)}
                      className={`w-full text-left px-4 py-3 rounded-lg flex items-center gap-3 transition-colors ${activeSubjectId === subject.id ? subject.color + ' font-bold ring-1 ring-inset ring-opacity-20' : 'text-gray-600 hover:bg-gray-50'}`}
                    >
                      <div className="min-w-[24px]">{subject.icon}</div>
                      <span className="truncate text-sm">{subject.title}</span>
                    </button>
                  ))}
                </nav>
              </aside>

              {/* Main Content Area */}
              <main className="flex-1 p-4 md:p-8 overflow-y-auto h-screen relative">
                {activeSubjectId === 'home' ? (
                  <div className="max-w-4xl mx-auto space-y-8 animate-fade-in">
                    <div className="bg-gradient-to-r from-emerald-600 to-teal-500 rounded-2xl p-8 text-white shadow-lg relative overflow-hidden">
                      <div className="relative z-10">
                        <h2 className="text-3xl font-bold mb-4">안성시교육청 공동교육과정에<br/>오신 것을 환영합니다.</h2>
                        <p className="text-emerald-100 text-lg mb-6">
                          학교의 경계를 넘어 학생들의 과목 선택권을 보장하고,<br/> 
                          진로에 맞는 심화된 학습 기회를 제공합니다.
                        </p>
                        <div className="inline-flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-sm font-medium">
                          <Sparkles size={16} className="text-yellow-300" />
                          <span>AI 상담사와 함께 진로를 탐색해보세요!</span>
                        </div>
                      </div>
                      <div className="absolute right-0 bottom-0 opacity-10 transform translate-x-10 translate-y-10">
                        <Bot size={200} />
                      </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                      <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow">
                        <div className="w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center text-emerald-600 mb-4">
                          <User size={24} />
                        </div>
                        <h3 className="font-bold text-lg mb-2">학생 중심</h3>
                        <p className="text-gray-500 text-sm">학생의 적성과 진로를 고려한 맞춤형 과목 개설 및 운영</p>
                      </div>
                      <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow">
                         <div className="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 mb-4">
                          <Monitor size={24} />
                        </div>
                        <h3 className="font-bold text-lg mb-2">미래 역량</h3>
                        <p className="text-gray-500 text-sm">로봇, 반도체 등 첨단 과학 기술 분야의 심화 학습 기회 제공</p>
                      </div>
                      <div className="bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow">
                         <div className="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 mb-4">
                          <ClipboardList size={24} />
                        </div>
                        <h3 className="font-bold text-lg mb-2">과정 평가</h3>
                        <p className="text-gray-500 text-sm">결과뿐만 아니라 탐구 과정과 성장을 중시하는 평가 방식</p>
                      </div>
                    </div>

                    <div className="bg-white rounded-xl shadow-sm border border-gray-100 p-6">
                      <h3 className="font-bold text-gray-800 text-lg mb-4">개설 과목 목록 ({curriculumData.length}개)</h3>
                      <div className="grid grid-cols-1 sm:grid-cols-2 gap-3">
                        {curriculumData.map(subject => (
                          <button
                            key={subject.id}
                            onClick={() => handleSubjectChange(subject.id)}
                            className="group flex items-center gap-4 p-4 rounded-lg border border-gray-100 hover:border-emerald-200 hover:bg-emerald-50 transition-all"
                          >
                            <div className={`p-2 rounded-lg ${subject.color.split(' ')[0]} ${subject.color.split(' ')[1]}`}>
                              {subject.icon}
                            </div>
                            <div className="text-left overflow-hidden">
                              <div className="font-bold text-gray-800 group-hover:text-emerald-700 truncate">{subject.title}</div>
                              <div className="text-xs text-gray-500 truncate">{subject.description}</div>
                            </div>
                          </button>
                        ))}
                      </div>
                    </div>
                  </div>
                ) : (
                  <div className="max-w-5xl mx-auto animate-fade-in pb-20">
                    {/* Subject Header */}
                    <div className="bg-white rounded-2xl p-8 shadow-sm border border-gray-100 mb-6">
                      <div className="flex flex-col md:flex-row md:items-center gap-4 mb-4">
                        <div className={`p-3 w-fit rounded-xl ${activeSubject.color}`}>
                          {React.cloneElement(activeSubject.icon, { size: 32 })}
                        </div>
                        <div>
                          <h2 className="text-3xl font-bold text-gray-800">{activeSubject.title}</h2>
                          <p className="text-gray-500 mt-1">{activeSubject.description}</p>
                        </div>
                      </div>
                      
                      {/* Tab Navigation */}
                      <div className="flex space-x-1 bg-gray-100 p-1 rounded-lg overflow-x-auto">
                        {activeSubject.tabs.map((tab, idx) => (
                          <button
                            key={idx}
                            onClick={() => handleTabChange(idx)}
                            className={`
                              flex-1 min-w-[100px] py-2.5 px-3 rounded-md text-sm font-medium transition-all whitespace-nowrap
                              ${activeTab === idx 
                                ? 'bg-white text-gray-800 shadow-sm' 
                                : 'text-gray-500 hover:text-gray-700 hover:bg-gray-200'}
                            `}
                          >
                            {tab.name}
                          </button>
                        ))}
                      </div>
                    </div>

                    {/* AI Summary Section */}
                    <div className="mb-6">
                       {!summary && !isSummarizing ? (
                         <button 
                          onClick={generateSummary}
                          className="flex items-center gap-2 text-sm text-indigo-600 bg-indigo-50 hover:bg-indigo-100 px-4 py-2 rounded-lg transition-colors"
                         >
                           <Sparkles size={16} />
                           <span>AI로 이 내용 3줄 요약하기</span>
                         </button>
                       ) : (
                         <div className="bg-indigo-50 border border-indigo-100 rounded-xl p-5 relative">
                           <div className="flex items-center gap-2 mb-2 text-indigo-700 font-bold text-sm">
                             <Sparkles size={16} />
                             AI 핵심 요약
                           </div>
                           {isSummarizing ? (
                             <div className="flex items-center gap-2 text-gray-500 text-sm">
                               <Loader2 className="animate-spin" size={16} />
                               요약 중입니다...
                             </div>
                           ) : (
                             <p className="text-gray-700 text-sm leading-relaxed whitespace-pre-line">{summary}</p>
                           )}
                         </div>
                       )}
                    </div>

                    {/* Content Area */}
                    <div className="transition-all duration-300">
                       {activeSubject.tabs[activeTab].content}
                    </div>
                  </div>
                )}
              </main>

              {/* AI Chatbot Overlay */}
              <AIChatBot />
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
